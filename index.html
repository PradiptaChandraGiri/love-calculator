<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Love Calculator ‚Äì Pradipta</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff6b81;
      --secondary: #ff4d6d;
      --bg-light: #fff0f5;
      --bg-dark: #121212;
      --card-bg-light: rgba(255, 255, 255, 0.9);
      --card-bg-dark: rgba(255, 255, 255, 0.1);
      --text-dark: #2d2d2d;
      --text-light: #ffffff;
      --border-color: #ddd;
      --transition: all 0.3s ease;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #ffe6eb, #ffd6f0);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      transition: background-color var(--transition);
      overflow: hidden; /* Prevent scrollbars during animations */
      position: relative; /* For positioning the toggle button */
    }

    h1 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      font-size: 3rem;
      margin-bottom: 1rem;
      animation: fadeInDown 1s ease-out;
    }

    .toggle-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: transparent;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      transition: transform var(--transition);
    }

    .toggle-button:hover {
      transform: scale(1.1);
    }

    form {
      background: var(--card-bg-light);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      max-width: 500px;
      animation: fadeInUp 1s ease-out;
    }

    input, button {
      padding: 0.8rem;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      font-size: 1rem;
      transition: all var(--transition);
      position: relative; /* For ripple effect */
      overflow: hidden; /* For ripple effect */
    }

    input {
      background: #fff;
    }

    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 5px var(--primary);
      animation: focusAnimation 0.3s ease-out; /* Focus animation */
    }

    button {
      background-color: var(--primary);
      color: var(--text-light);
      cursor: pointer;
    }

    button:hover {
      transform: scale(1.05);
      background-color: var(--secondary);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }

    .result, .dashboard {
      margin-top: 2rem;
      background: var(--card-bg-light);
      padding: 1.5rem;
      border-radius: 16px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      animation: fadeIn 0.5s ease-out;
      display: none; /* Initially hidden */
      overflow-y: auto;
      max-height: 70vh;
    }

    .log-item {
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border-color);
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      font-size: 0.9rem;
      padding: 1rem 0;
      color: #777;
      text-align: center;
      background: rgba(255, 255, 255, 0.8);
      z-index: 10;
    }

    footer a {
      color: inherit;
      text-decoration: underline;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes focusAnimation {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .emoji {
      font-size: 2rem;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Dark Mode Styles */
    body.dark-mode {
      background: var(--bg-dark);
      color: var(--text-light);
    }

    body.dark-mode h1 {
      color: var(--secondary);
    }

    body.dark-mode form {
      background: var(--card-bg-dark);
    }

    body.dark-mode .result, body.dark-mode .dashboard {
      background: var(--card-bg-dark);
      border: 1px solid var(--border-color);
    }

    /* Ripple Effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.6);
      transform: scale(0);
      animation: rippleAnimation 0.6s linear;
    }

    @keyframes rippleAnimation {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* Heart Animation */
    .heart {
      position: fixed;
      bottom: -50px;
      font-size: 20px;
      animation: float linear forwards;
      opacity: 0.7;
      z-index: -1;
      will-change: transform; /* Optimize animation */
    }

    @keyframes float {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh);
        opacity: 0;
      }
    }

    /* Scrollbar Styling */
    .dashboard::-webkit-scrollbar {
      width: 8px;
    }
    
    .dashboard::-webkit-scrollbar-track {
      background: rgba(255, 206, 218, 0.2);
      border-radius: 10px;
    }
    
    .dashboard::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 10px;
    }
    
    .dashboard::-webkit-scrollbar-thumb:hover {
      background: var(--secondary);
    }

    .dashboard-content {
      padding-right: 10px;
    }

    /* Responsive Design */
    @media (max-width: 600px) {
      h1 {
        font-size: 2.5rem;
      }

      form {
        padding: 1.5rem;
      }

      button {
        font-size: 1.1rem;
      }

      .toggle-button {
        font-size: 1.5rem; /* Smaller size for mobile */
      }
    }
  </style>
</head>

<body>
  <button class="toggle-button" id="toggleDarkMode">üåô</button>

  <h1>üíò Love Match Calculator</h1>
  <div id="hearts-container"></div>

  <form id="loveForm">
    <input type="text" id="yourName" placeholder="Your Name" required>
    <input type="text" id="crushName" placeholder="Crush Name" required>
    <button type="submit">Calculate Love %</button>
  </form>

  <div class="result" id="resultBox"></div>

  <div class="dashboard" id="dashboardBox" style="display:none;"></div>

  <footer>
    <p>
      Made with ‚ù§Ô∏è by 
      <strong>
        <a href="https://www.linkedin.com/in/pradipta-chandra-giri-035b88340/" target="_blank">
          Pradipta Chandra Giri
        </a>
      </strong><br>
      <small>&copy; 2025 Pradipta Chandra Giri. All rights reserved.</small>
    </p>
  </footer>

  <audio id="backgroundMusic" loop>
    <source src="calming-music.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    const loveForm = document.getElementById('loveForm');
    const resultBox = document.getElementById('resultBox');
    const dashboardBox = document.getElementById('dashboardBox');
    const toggleDarkMode = document.getElementById('toggleDarkMode');
    const backgroundMusic = document.getElementById('backgroundMusic');

    // Play background music
    backgroundMusic.volume = 0.5; // Set volume to 50%
    backgroundMusic.play();

    // Continuous heart animations
    setInterval(createHeart, 1000); // Create a heart every second

    const urlParams = new URLSearchParams(window.location.search);
    const ref = urlParams.get('ref');
    const dashboardName = urlParams.get('dashboard');

    const loveLogs = JSON.parse(localStorage.getItem('loveLogs') || '[]');

    loveForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const yourName = document.getElementById('yourName').value.trim();
      const crushName = document.getElementById('crushName').value.trim();

      if (!yourName || !crushName) {
        alert("Please enter both names!");
        return;
      }

      const key = yourName.toLowerCase() + '_' + crushName.toLowerCase();
      let lovePercent;
      let message = "";

      if (yourName.toLowerCase() === 'pradipta' && crushName.toLowerCase().includes('bishnupriya')) {
        lovePercent = Math.floor(90 + Math.random() * 10);
        message = "üíñ Special connection detected! A gift is on your way, Bishnupriya üíù";
      } 
      else if (yourName.toLowerCase() === 'bishnupriya' && crushName.toLowerCase().includes('pradipta')) {
        lovePercent = Math.floor(90 + Math.random() * 10);
        message = "üíñ Special connection detected! A gift is on your way, Bishnupriya üíù";
      } else {
        const seed = yourName.length + crushName.length + key.length;
        lovePercent = ((seed * 17) % 100);
        if (lovePercent < 10) lovePercent += 10;
        message = lovePercent > 75 ? "‚ù§Ô∏è A strong bond!" : lovePercent > 50 ? "üíó Good match!" : "üíî Needs more love!";
      }

      const date = new Date().toISOString().split("T")[0];

      const entry = {
        owner: localStorage.getItem("ownerName") || yourName,
        name1: yourName,
        name2: crushName,
        loveScore: lovePercent,
        date: date,
        sharedWith: ref ? [ref] : []
      };

      if (ref) {
        // For shared links, only show this result
        resultBox.innerHTML += `<p style="color:gray;">‚úÖ This result has been shared with you.</p>`;
      } else {
        // For owners, show dashboard link
        localStorage.setItem("ownerName", yourName);
        const baseUrl = window.location.origin + window.location.pathname;
        resultBox.innerHTML += `
          <div style='margin-top:20px;'>
            <div>üîó Share result: <strong>${baseUrl}?ref=${encodeURIComponent(yourName)}</strong></div>
            <div>üìä <a href="${baseUrl}?dashboard=${encodeURIComponent(yourName)}">View your private dashboard</a></div>
          </div>
        `;
      }
      loveLogs.push(entry);
      localStorage.setItem('loveLogs', JSON.stringify(loveLogs));

      resultBox.innerHTML = `<strong>${yourName}</strong> ‚ù§Ô∏è <strong>${crushName}</strong><br><br><h2>${lovePercent}% Love Match</h2><p>${message}</p><p style="margin-top:1rem;font-size:0.9rem;color:#999;">Saved on ${date}</p>`;
      resultBox.style.display = 'block';
      resultBox.classList.add('fade-in'); // Add fade-in class for animation

      if (!ref) {
        localStorage.setItem("ownerName", yourName);
        const baseUrl = window.location.origin + window.location.pathname;
        resultBox.innerHTML += `<div style='margin-top:10px;'>üîó Share this link:<br><strong>${baseUrl}?ref=${encodeURIComponent(yourName)}</strong></div>`;
        resultBox.innerHTML += `<div>üìä View your private dashboard:<br><strong>${baseUrl}?dashboard=${encodeURIComponent(yourName)}</strong></div>`;
      } else {
        resultBox.innerHTML += `<p style="color:gray;">‚úÖ This result has been shared with you.</p>`;
      }

      // Create ripple effect
      const ripple = document.createElement('span');
      ripple.classList.add('ripple');
      ripple.style.left = `${e.clientX - e.target.offsetLeft}px`;
      ripple.style.top = `${e.clientY - e.target.offsetTop}px`;
      e.target.appendChild(ripple);
      setTimeout(() => {
        ripple.remove();
      }, 600);

      });

    function createHeart() {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      
      // Random heart colors and styles
      const heartTypes = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíì'];
      const colors = ['#ff6b81', '#ff4d6d', '#ff99ac', '#ffccd5'];
      
      heart.innerHTML = heartTypes[Math.floor(Math.random() * heartTypes.length)];
      heart.style.color = colors[Math.floor(Math.random() * colors.length)];
      heart.style.fontSize = `${15 + Math.random() * 15}px`;
      heart.style.animationDuration = `${5 + Math.random() * 5}s`;
      
      document.body.appendChild(heart);

      // Randomize the position and animation
      const randomX = Math.random() * window.innerWidth;
      heart.style.left = `${randomX}px`;
      heart.style.animationDelay = `${Math.random() * 2}s`;

      // Remove heart after animation
      heart.addEventListener('animationend', () => {
        heart.remove();
      });
    }

    function showDashboard(name) {
      const filtered = loveLogs.filter(log => log.owner === name);
      if (filtered.length === 0) {
        dashboardBox.innerHTML = `<p>No saved love calculations yet.</p>`;
      } else {
        dashboardBox.style.display = 'block';
        dashboardBox.innerHTML = `
          <h3>üîí Love History for ${name}</h3>
          <div style="text-align:center; margin:10px 0;">
            <a href="?" style="color:#ff6b81; text-decoration:none;">‚Üê Back to calculator</a>
          </div>
          <div class="dashboard-content">
        `;
        filtered.reverse().forEach(log => {
          dashboardBox.innerHTML += `<div class="log-item">${log.date}: <strong>${log.name1}</strong> ‚ù§Ô∏è <strong>${log.name2}</strong> = <strong>${log.loveScore}%</strong></div>`;
        });
        dashboardBox.innerHTML += `</div></div>`;
      }
    }

    if (dashboardName && localStorage.getItem("ownerName") === dashboardName) {
      showDashboard(dashboardName);
    } else if (ref) {
      showDashboard(ref);
    }

    // Dark Mode Toggle
    toggleDarkMode.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      toggleDarkMode.innerHTML = document.body.classList.contains('dark-mode') ? 'üåû' : 'üåô'; // Change emoji based on mode
    });
  </script>
</body>

</html>
